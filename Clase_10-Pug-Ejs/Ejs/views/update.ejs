<!DOCTYPE html>
<html lang="en">
  <%- include('templates/header'); -%>
  <body>
    <%- include('templates/nav'); -%>

    <div class="container border my-5">
      <h1>Product List</h1>
    </div>

    <div>
      <form action="/update" method="POST">
        <input type="text" name="id" placeholder="ID" />
        <input type="submit" value="Search" />
      </form>
    </div>

    <div>
      <% if(items){ %>

      <!-- Se renderizan los items que se encuentran en el archivo.txt -->
      <div class="row justify-content-center">
        <% for (let element of data) { %>
        <!-- <div class="col-sm-4 m-3"> -->
        <div class="card m-3" style="width: 18rem">
          <img
            src="https://images.unsplash.com/photo-1563201180-d98027da04f8?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"
            class="card-img-top"
            alt="..."
          />
          <div class="card-body">
            <h5 class="card-title"><%= element.name %></h5>
            <p class="card-text">
              Some quick example text to build on the card title and make up the
              bulk of the card's content.
            </p>
            <p><b>price: <%= element.price %></b></p>

            <!-- <button
              id="<%= element.id %>"
              onclick="agregarAlCarrito(id)"
              class="btn btn-primary"
            >
              Comprar
            </button> -->
          </div>
        </div>
        <!-- </div> -->
        <% } %>
      </div>

      <!-- Muestra campos de actualizacion solo si se realizo la busqueda de un item -->
      <% if(data.length == 1){ %>
      <div>
        <h2>Update Product</h2>
        <form action="/update/<%= data[0].id %>?_method=PUT" method="POST">
          <input type="text" name="newName" placeholder="Name" />
          <input type="text" name="newPrice" placeholder="Price" />
          <input type="submit" value="update" />
        </form>
      </div>

      <% } %> <% } else {%>
      <div>
        <h1></h1>
        <div class="alert alert-warning" role="alert"><%= MSG_NOT_FOUNT %></div>
      </div>
      <% }%>
    </div>

    <div class="bg-dark"><%- include('./templates/footer'); -%></div>
  </body>
</html>
